{% extends "base.html" %}
{% block content %}
<div class="row">
  <div class="col-12 mb-3">
    <h1 class="h3">Fitness Club Demo</h1>
    <p class="text-muted">Use this page to quickly see IDs for trainers, rooms, and classes, and to try admin actions.</p>
  </div>

  <!-- Quick lookup tables -->
  <div class="col-md-4 mb-3">
    <div class="card shadow-sm">
      <div class="card-header">Trainers</div>
      <div class="card-body p-0">
        <table class="table table-sm mb-0">
          <thead class="table-light">
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Email</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for t in trainers %}
              <tr>
                <td>{{ t.trainer_id }}</td>
                <td>{{ t.first_name }} {{ t.last_name }}</td>
                <td>{{ t.email }}</td>
                <td>
                  <a class="btn btn-sm btn-outline-primary me-1 mb-1"
                    href="{{ url_for('trainer_schedule', trainer_id=t.trainer_id) }}">
                    Schedule
                  </a>
                  <a class="btn btn-sm btn-outline-secondary me-1 mb-1"
                    href="{{ url_for('trainer_availability', trainer_id=t.trainer_id) }}">
                    Availability
                  </a>
                  <a class="btn btn-sm btn-outline-success me-1 mb-1"
                    href="{{ url_for('trainer_manage_classes', trainer_id=t.trainer_id) }}">
                    Classes
                  </a>
                  <a class="btn btn-sm btn-outline-info mb-1"
                    href="{{ url_for('trainer_members', trainer_id=t.trainer_id) }}">
                    Members
                  </a>
                </td>
              </tr>
            {% else %}
              <tr>
                <td colspan="4" class="text-muted text-center">
                  No trainers yet.
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="col-md-4 mb-3">
    <div class="card shadow-sm">
      <div class="card-header">Rooms</div>
      <div class="card-body p-0">
        <table class="table table-sm mb-0">
          <thead class="table-light">
            <tr><th>ID</th><th>Name</th><th>Capacity</th></tr>
          </thead>
          <tbody>
          {% for r in all_rooms %}
            <tr>
              <td>{{ r.room_id }}</td>
              <td>{{ r.name }}</td>
              <td>{{ r.capacity }}</td>
            </tr>
          {% else %}
            <tr><td colspan="3" class="text-muted text-center">No rooms yet.</td></tr>
          {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="col-md-4 mb-3">
    <div class="card shadow-sm">
      <div class="card-header">Classes</div>
      <div class="card-body p-0">
        <table class="table table-sm mb-0">
          <thead class="table-light">
            <tr><th>ID</th><th>Name</th><th>Trainer</th></tr>
          </thead>
          <tbody>
          {% for c in all_classes %}
            <tr>
              <td>{{ c.class_id }}</td>
              <td>{{ c.name }}</td>
              <td>{{ c.trainer_id }}</td>
            </tr>
          {% else %}
            <tr><td colspan="3" class="text-muted text-center">No classes yet.</td></tr>
          {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Admin forms -->
  <div class="col-md-6 mb-3">
    <div class="card shadow-sm">
      <div class="card-header">Admin: Reassign Session Room</div>
      <div class="card-body">
        <form method="post" action="{{ url_for('admin_reassign_session') }}" class="row g-2">
          <div class="col-6">
            <label class="form-label">Session ID</label>
            <input name="session_id" class="form-control" required>
          </div>
          <div class="col-6">
            <label class="form-label">New Room ID</label>
            <input name="new_room_id" class="form-control" required>
          </div>
          <div class="col-12">
            <button class="btn btn-primary mt-2" type="submit">Update Room</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div class="col-md-6 mb-3">
    <div class="card shadow-sm">
      <div class="card-header">Admin: Reschedule Class</div>
      <div class="card-body">
        <form method="post" action="{{ url_for('admin_reschedule_class_view') }}" class="row g-2">
          <div class="col-md-4">
            <label class="form-label">Class ID</label>
            <input name="class_id" class="form-control" required>
          </div>
          <div class="col-md-4">
            <label class="form-label">New Room ID</label>
            <input name="new_room_id" class="form-control" required>
          </div>
          <div class="col-md-6">
            <label class="form-label">New Start</label>
            <input name="new_start" class="form-control" placeholder="2025-12-01T09:00" required>
          </div>
          <div class="col-md-6">
            <label class="form-label">New End</label>
            <input name="new_end" class="form-control" placeholder="2025-12-01T10:00" required>
          </div>
          <div class="col-12">
            <button class="btn btn-primary mt-2" type="submit">Reschedule</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
